name = "cloud-gallery"

compatibility_date = "2022-07-25"
compatibility_flags = [
  "streams_enable_constructors",
  "transformstream_enable_standard_constructor",
]
# The SSR code is generated in the `server` directory.
main = "server/entry.ssr.js"
# assets = { bucket = "./dist", include = ["**", "../../header/dist/**"] }
assets = "./dist"
# Build the SSR code that will run in the Worker.
[build]
# The client code is generated in the `dist` directory.
# We use the `assets` config to supply these static files as needed.
command = "npm run build"
# Rebuild when the helper library changes
watch_dir = ["src", "../helpers/src"]

[env.prod]
name = "cloud-gallery"
route = { pattern = "admin.skran.app", custom_domain = true }
services = [
	{ binding = "header", service = "cloud-gallery-header"},
	{ binding = "gallery", service = "cloud-gallery-gallery"},
	{ binding = "filter", service = "cloud-gallery-filter"},
	{ binding = "body", service = "cloud-gallery-body"},
	{ binding = "footer", service = "cloud-gallery-footer"}
]
